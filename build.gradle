/*
 * This file was generated by the Gradle 'init' task.
 */
plugins {
    id "org.sonarqube" version "2.8"
}

// TODO: project.tasks["sonarqube"].dependsOn "jacocoTestReport"

allprojects {
    apply plugin: 'maven'
    apply plugin: 'jacoco'

    group = 'com.gov-poc'
    version = '1.0.1-SNAPSHOT'

    jacoco {
        toolVersion = "0.8.5"
        reportsDir = file("build/reports/jacoco")
    }
}

subprojects {
    apply plugin: 'java'

    repositories {
        mavenCentral()
        maven {
            url = 'http://repo.maven.apache.org/maven2'
        }
    }

    jacocoTestReport {
        reports {
            xml.enabled true
        }
    }

    sonarqube {
        properties {
            property "sonar.projectKey", "Artemas-Muzanenhamo_gov-poc"
            property "sonar.sources", "src/main/java/com/gov/zw"
            property "sonar.tests", "src/test/java/com/gov/zw"
            property "sonar.exclusions", "**/*Application.java"
            property "sonar.test.exclusions", "**/*ApplicationTests.java"
            property "sonar.coverage.jacoco.xmlReportPaths", "build/reports/jacoco/test/jacocoTestReport.xml"
        }
    }

    project(":configuration-server") {
        sonarqube {
            skipProject = true
        }
    }

    project(":gateway") {
        sonarqube {
            skipProject = true
        }
    }

    project(":discovery-server") {
        sonarqube {
            skipProject = true
        }
    }

    sourceCompatibility = "${javaVersion}"
}
